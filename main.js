/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var w=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var E=Object.prototype.hasOwnProperty;var S=(a,i)=>{for(var t in i)w(a,t,{get:i[t],enumerable:!0})},P=(a,i,t,e)=>{if(i&&typeof i=="object"||typeof i=="function")for(let l of x(i))!E.call(a,l)&&l!==t&&w(a,l,{get:()=>i[l],enumerable:!(e=v(i,l))||e.enumerable});return a};var T=a=>P(w({},"__esModule",{value:!0}),a);var F={};S(F,{default:()=>y});module.exports=T(F);var s=require("obsidian"),k={rules:[]},y=class extends s.Plugin{async onload(){await this.loadSettings(),this.addSettingTab(new m(this.app,this)),this.registerEvent(this.app.workspace.on("file-open",this.handleNewFile.bind(this)))}async handleNewFile(t){if(!t||!(t instanceof s.TFile))return;console.log("\u{1F514} New file detected:",t.basename);let e=t.basename;for(let l of this.settings.rules){let{keyword:c,folder:g,position:n}=l,o=!1;if((n==="start"&&e.startsWith(c)||n==="end"&&e.endsWith(c)||n==="middle"&&e.includes(c))&&(o=!0),o){let d=t.name.endsWith(".md")?t.name:`${t.name}.md`,p=(0,s.normalizePath)(`${g}/${d}`);await this.app.vault.adapter.exists(g)||await this.app.vault.createFolder(g);try{await this.app.fileManager.renameFile(t,p),console.log(`Moved to: ${p}`)}catch(u){console.error("Move failed:",u)}return}}}async loadSettings(){this.settings=Object.assign({},k,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}},m=class extends s.PluginSettingTab{constructor(t,e){super(t,e);this.plugin=e}display(){let{containerEl:t}=this;t.empty(),t.createEl("h2",{text:"Move To Folder: Rules"});let e=t.createEl("div");e.style.display="flex",e.style.gap="8px",e.style.fontWeight="bold",e.style.margin="0 0 8px 0";let l=e.createEl("div",{text:"File name contains"}),c=e.createEl("div",{text:"Destination folder"}),g=e.createEl("div",{text:"Position"});[l,c,g].forEach(n=>{n.style.flex="1"}),this.plugin.settings.rules.forEach((n,o)=>{let d=t.createEl("div");d.style.display="flex",d.style.gap="8px",d.style.marginBottom="8px";let p=d.createEl("div");p.style.flex="1",new s.Setting(p).addText(r=>r.setPlaceholder("e.g., UA").setValue(n.keyword).onChange(async h=>{this.plugin.settings.rules[o].keyword=h,await this.plugin.saveSettings()}));let f=d.createEl("div");f.style.flex="1",new s.Setting(f).addText(r=>r.setPlaceholder("e.g., Work").setValue(n.folder).onChange(async h=>{this.plugin.settings.rules[o].folder=h,await this.plugin.saveSettings()}));let u=d.createEl("div");u.style.flex="1",new s.Setting(u).addDropdown(r=>r.addOption("start","Start").addOption("middle","Middle").addOption("end","End").setValue(n.position).onChange(async h=>{this.plugin.settings.rules[o].position=h,await this.plugin.saveSettings()})).addExtraButton(r=>r.setIcon("trash").setTooltip("Delete Rule").onClick(async()=>{this.plugin.settings.rules.splice(o,1),await this.plugin.saveSettings(),this.display()}))}),new s.Setting(t).addButton(n=>n.setButtonText("Add Rule").setCta().onClick(async()=>{this.plugin.settings.rules.push({keyword:"",folder:"",position:"start"}),await this.plugin.saveSettings(),this.display()}))}};
